@prefix : <http://f4w.restdesc.org/demo#>.
@prefix http: <http://www.w3.org/2011/http#>.
@prefix tmpl: <http://multimedialab.elis.ugent.be/organon/ontologies/tmpl#>.

# API 0 (get all parts)
{
    ?x a :calibration;
       :startedBy :worker.
}
=>
{
    _:request http:methodName "GET";
              tmpl:requestURI ("https://dummy-demo-repository.herokuapp.com/parts");
              http:resp [
                  http:body _:list
              ].
    ?x :partList _:list.
}.

# API “worker” start (request part ID)
{
    ?x a :calibration;
       :startedBy :worker;
       :partIdList ?list.
}
=>
{
    _:request http:methodName "GET";
              tmpl:requestURI ("http://askTheWorker/" "start");
              http:body {[
                  :message "Please input the starting information. 'id' corresponds to the part ID.";
                  :partIdList ?list
              ].};
              http:resp [
#TODO n should not be universal!
                  http:body _:body 
              ].
    _:body :contains {[
        :id ?n
    ]}.
    ?x :part_number ?n.
}.

# API 1 (request part information)
{
    ?x a :calibration;
       :part_number ?n.
}
=>
{
    _:request http:methodName "GET";
              tmpl:requestURI ("https://dummy-demo-repository.herokuapp.com/parts/" ?n);
              http:resp [
                  http:body _:body
              ].
#TODO universals ?min1 ?max1 ?min2 ?max2 ?p1 ?p2 ?p3 ?p4
    _:body :contains {[
        :tolerances ( {[ :min ?min1; :max ?max1 ]} {[ :min ?min2; :max ?max2 ]} );
        :machine_parameters ( ?p1 ?p2 ?p3 ?p4 )
    ]}.
    ?x :tolerances ( {[ :min ?min1; :max ?max1 ]} {[ :min ?min2; :max ?max2 ]} );
       :machine_parameters ( ?p1 ?p2 ?p3 ?p4 ).
}.










