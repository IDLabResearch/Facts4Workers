@prefix : <http://best_example_ever#>.
@prefix http: <http://www.w3.org/2011/http#>.
@prefix tmpl: <http://multimedialab.elis.ugent.be/organon/ontologies/tmpl#>.




# API “worker”
{
?x     a     :calibration;
    :part_number ?n.
}
=>
{
_:request http:methodName "GET";
        tmpl:requestURI ("http://askTheWorker" "doMeasurement");
        http:body [
    		:info {
			?x     a     :calibration;
      			:part_number ?n.
			}
			];
	http:response [
	http:body [
	:geometrical_dimension (_:d1 _:d2)
	]
	].
?x :geometrical_dimension (_:d1 _:d2).
}.


# API2
{
?x     a     :calibration.
?x     :operator ?o;
    :part_number ?n;
   :machine_parameters (?p1 ?p2 ?p3 ?p4);
    :tolerances ((?min1 ?max1) (?min2 ?max2));
    :geometrical_dimension (?t1 ?t2).
}
=>
{
 _:request     http:methodName "POST";
        tmpl:requestURI ("http://pacific-shore-4503.herokuapp.com/calibrations");
        http:body [
        :operator ?o;
        :part_number ?n;
        :machine_parameters (?p1 ?p2 ?p3 ?p4);
        :tolerances ((?min1 ?max1) (?min2 ?max2));
        :geometrical_dimension (?d1 ?d2)
        ];
        http:resp [
             http:body[     :id _:id;
                            :result _:ok;
                            :suggested_parameters (_:pp1 _:pp2 _:pp3 _:pp4)
            ]         
        ].
   ?x :calibrationState _:ok.    
}.



